@* Giả sử Model của bạn là một ViewModel chứa danh sách sản phẩm và tổng tiền *@
@* @model ShoppingCartViewModel *@

@{
    ViewData["Title"] = "Giỏ Hàng";
    // Giả lập dữ liệu để hiển thị (trong thực tế sẽ lấy từ model)
    bool hasItems = true;
}

<div class="container my-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3">Giỏ hàng của bạn</h1>
        <a href="#" class="text-decoration-none">
            <i class="fas fa-arrow-left me-2"></i>Tiếp tục mua sắm
        </a>
    </div>

    @if (hasItems)
    {
        <div class="row g-4">
            <!-- DANH SÁCH SẢN PHẨM -->
            <div class="col-lg-8">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <span class="text-muted">Bạn đang có 2 sản phẩm trong giỏ hàng</span>
                    <button class="btn btn-sm btn-outline-danger">
                        <i class="fas fa-trash me-2"></i>Xóa tất cả
                    </button>
                </div>

                <!-- Bắt đầu Card sản phẩm - Lặp lại khối này cho mỗi sản phẩm -->
                <div class="card shadow-sm mb-3">
                    <div class="card-body">
                        <div class="row align-items-center">
                            <div class="col-12 col-md-2 mb-3 mb-md-0">
                                <img src="~/img/sp1.jpg" class="img-fluid rounded" alt="MacBook Air 2025">
                            </div>
                            <div class="col-12 col-md-4 mb-3 mb-md-0">
                                <h6 class="mb-1">MacBook Air 2025</h6>
                                <small class="text-muted">Apple M4, 24GB, 512GB</small>
                            </div>
                            <div class="col-6 col-md-3">
                                <div class="input-group input-group-sm" style="width: 120px;">
                                    <button class="btn btn-outline-secondary" type="button" onclick="decreaseQty(this)">-</button>
                                    <input type="text" class="form-control text-center" value="1" readonly>
                                    <button class="btn btn-outline-secondary" type="button" onclick="increaseQty(this)">+</button>
                                </div>
                            </div>
                            <div class="col-4 col-md-2 text-md-end">
                                <span class="fw-bold">36.999.000₫</span>
                            </div>
                            <div class="col-2 col-md-1 text-end">
                                <button class="btn btn-link text-danger p-0">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Kết thúc Card sản phẩm -->
                <!-- Thêm card sản phẩm khác ở đây -->

            </div>

            <!-- TÓM TẮT ĐƠN HÀNG -->
            <div class="col-lg-4">
                <div class="card shadow-sm">
                    <div class="card-body">
                        <h5 class="card-title mb-4">Tóm tắt đơn hàng</h5>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 pb-2">
                                <span>Tạm tính</span>
                                <span>36.999.000₫</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 pb-2">
                                <span>Phí giao hàng</span>
                                <span class="text-success">Miễn phí</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center px-0 mb-3">
                                <span>Mã giảm giá</span>
                                <a href="#!">Nhập mã</a>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center border-top pt-3 px-0">
                                <strong class="h5">Tổng cộng</strong>
                                <strong class="h5">36.999.000₫</strong>
                            </li>
                        </ul>
                        <a href="#" class="btn btn-primary w-100 mt-4 py-2 fw-bold text-white">TIẾN HÀNH THANH TOÁN</a>
                        <div class="text-center mt-3">
                            <small class="text-muted">Chấp nhận thanh toán:</small>
                            <div class="d-flex justify-content-center gap-2 mt-2">
                                <i class="fab fa-cc-visa fa-2x"></i>
                                <i class="fab fa-cc-mastercard fa-2x"></i>
                                <i class="fab fa-cc-jcb fa-2x"></i>
                                <img src="~/img/momo.png" height="32" alt="MoMo">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }
    else
    {
        <!-- GIAO DIỆN KHI GIỎ HÀNG RỖNG -->
        <div class="text-center py-5">
            <i class="fas fa-shopping-cart fa-4x text-muted mb-4"></i>
            <h2 class="mb-3">Giỏ hàng của bạn đang trống</h2>
            <p class="text-muted mb-4">Trông có vẻ như bạn chưa thêm sản phẩm nào vào giỏ hàng. <br>Hãy bắt đầu mua sắm ngay thôi!</p>
            <a href="/" class="btn btn-primary">Bắt đầu mua sắm</a>
        </div>
    }
</div>

<script>
    function increaseQty(btn) {
        let input = btn.previousElementSibling;
        input.value = parseInt(input.value) + 1;
        // Trong thực tế: Gọi AJAX đến server để cập nhật giỏ hàng
        // Sau đó cập nhật lại tổng tiền dựa trên kết quả trả về từ server.
    }

    function decreaseQty(btn) {
        let input = btn.nextElementSibling;
        if (parseInt(input.value) > 1) {
            input.value = parseInt(input.value) - 1;
            // Tương tự, gọi AJAX để cập nhật
        }
    }
</script>

