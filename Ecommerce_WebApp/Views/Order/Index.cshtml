@{
    ViewData["Title"] = "Lịch sử mua hàng";
}

<div class="container my-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h2">Lịch sử Đơn hàng</h1>
    </div>

    <!-- BỘ LỌC DẠNG TABS -->
    <ul class="nav nav-pills mb-4" id="order-tabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="all-tab" data-bs-toggle="tab" data-bs-target="#all-orders-pane" type="button" role="tab">Tất cả</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="processing-tab" data-bs-toggle="tab" data-bs-target="#processing-orders-pane" type="button" role="tab">Đang xử lý</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="delivering-tab" data-bs-toggle="tab" data-bs-target="#delivering-orders-pane" type="button" role="tab">Đang giao</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="delivered-tab" data-bs-toggle="tab" data-bs-target="#delivered-orders-pane" type="button" role="tab">Đã giao</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="cancelled-tab" data-bs-toggle="tab" data-bs-target="#cancelled-orders-pane" type="button" role="tab">Đã hủy</button>
        </li>
    </ul>

    <!-- NỘI DUNG CÁC TABS -->
    <div class="tab-content" id="order-tabs-content">
        <!-- Tab 1: Tất cả đơn hàng -->
        <div class="tab-pane fade show active" id="all-orders-pane" role="tabpanel">
            @* Trong thực tế, bạn sẽ dùng một vòng lặp @foreach duy nhất ở đây và lọc bằng LINQ.
               Đây chỉ là giao diện cứng để minh họa. *@

            <!-- Ví dụ đơn hàng Đang giao -->
            @await Html.PartialAsync("_OrderCard", new { Status = "Đang giao" })

            <!-- Ví dụ đơn hàng Đã giao -->
            @await Html.PartialAsync("_OrderCard", new { Status = "Đã giao" })

            <!-- Ví dụ đơn hàng Đã hủy -->
            @await Html.PartialAsync("_OrderCard", new { Status = "Đã hủy" })
        </div>

        <!-- Tab 2: Đang xử lý -->
        <div class="tab-pane fade" id="processing-orders-pane" role="tabpanel">
            @* @foreach(var order in Model.Where(o => o.Status == "Processing")) { ... } *@
            @* Giao diện khi không có đơn hàng *@
            <div class="text-center py-5">
                <i class="fas fa-box-open fa-3x text-muted mb-3"></i>
                <p class="text-muted">Bạn không có đơn hàng nào đang được xử lý.</p>
            </div>
        </div>

        <!-- Tab 3: Đang giao -->
        <div class="tab-pane fade" id="delivering-orders-pane" role="tabpanel">
            @await Html.PartialAsync("_OrderCard", new { Status = "Đang giao" })
        </div>

        <!-- Tab 4: Đã giao -->
        <div class="tab-pane fade" id="delivered-orders-pane" role="tabpanel">
            @await Html.PartialAsync("_OrderCard", new { Status = "Đã giao" })
        </div>

        <!-- Tab 5: Đã hủy -->
        <div class="tab-pane fade" id="cancelled-orders-pane" role="tabpanel">
            @await Html.PartialAsync("_OrderCard", new { Status = "Đã hủy" })
        </div>
    </div>
</div>